import{_ as l,c as i,a as s,b as p,d as a,e as t,r as o,o as r}from"./app-DqNLHUev.js";const c={},u={href:"https://www.lasy.site/views/%E5%89%8D%E7%AB%AF/%E4%BD%BF%E7%94%A8%20GitHub%20Actions%20%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2.html",target:"_blank",rel:"noopener noreferrer"},d={href:"https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/xyyolab/blog/blob/master/.github/workflows/main.yml",target:"_blank",rel:"noopener noreferrer"},k={class:"custom-container tip"},g={href:"https://github.com/xyyolab",target:"_blank",rel:"noopener noreferrer"},b={href:"https://blog.xyyolab.com",target:"_blank",rel:"noopener noreferrer"};function v(h,n){const e=o("ExternalLinkIcon");return r(),i("div",null,[n[18]||(n[18]=s("h2",{id:"å¦‚ä½•åœ¨-github-actions-æ—¶ä½¿ç”¨-secretkey",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å¦‚ä½•åœ¨-github-actions-æ—¶ä½¿ç”¨-secretkey"},[s("span",null,"å¦‚ä½•åœ¨ GitHub Actions æ—¶ä½¿ç”¨ secretKey")])],-1)),n[19]||(n[19]=s("h3",{id:"é—®é¢˜",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#é—®é¢˜"},[s("span",null,"é—®é¢˜")])],-1)),s("p",null,[n[1]||(n[1]=a("å½“æˆ‘å‚è€ƒ")),s("a",u,[n[0]||(n[0]=a("è¿™ç¯‡")),t(e)]),n[2]||(n[2]=a("ï¼Œä½¿ç”¨ ")),n[3]||(n[3]=s("code",null,"Github Action",-1)),n[4]||(n[4]=a(" è‡ªåŠ¨éƒ¨ç½²çš„æ—¶å€™å‘ç°è¦ä½¿ç”¨ Secret Key å»ä½¿ç”¨ ")),n[5]||(n[5]=s("code",null,"VSSUE",-1)),n[6]||(n[6]=a(" è¯„è®ºåŠŸèƒ½ï¼Œæˆ‘å°±çŠ¯æ„äº†ã€‚"))]),n[20]||(n[20]=p(`<p>ç›´æ¥å†™åœ¨ <code>config</code> é‡Œè™½è¯´å¹¶æ²¡æœ‰è°ä¼šç›—ç”¨ï¼ˆå§ ğŸ˜ƒï¼‰ï¼Œä½†æ˜¾ç„¶ä¸å¤ªå®‰å…¨ã€‚è¿™æ˜¯åŸ workflow æ–‡ä»¶ä¸­ä¸‹é¢è¿™æ®µå¯å‘äº†æˆ‘ã€‚å…¶ä»–çš„å˜é‡éš¾é“ä¹Ÿå¯ä»¥è¿™æ ·ä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Ÿ</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code><span class="line"><span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è§£å†³æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#è§£å†³æ–¹æ³•"><span>è§£å†³æ–¹æ³•</span></a></h3><p>æœç„¶ <code>Github</code> æ—©å°±å¸®æˆ‘ä»¬æƒ³å¥½äº†è§£å†³åŠæ³•ã€‚</p>`,4)),s("ul",null,[s("li",null,[s("a",d,[n[7]||(n[7]=a("Creating and storing encrypted secrets")),t(e)])])]),n[21]||(n[21]=p(`<p>ç®€å•è¯´å°±æ˜¯åœ¨å¯¹åº” repo çš„ <code>Secrets</code> åŒºåŸŸé‡Œè¾“å…¥ã€‚</p><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/470919/6d81c510-7f25-a039-5087-f07854d6d75e.png" alt="Screenshot 2020-03-23 13.08.05.png"></p><p><strong>æ³¨æ„âš ï¸</strong>ï¼šä¸Šå›¾ä¸­ç”»åœˆçš„ä½ç½®çš„ <code>A</code>, æ­£ç¡®çš„è‹±è¯­è¯­æ³•æ˜¯ <code>AN</code>, ä¸è¿‡è¿™ç¯‡æ•™ç¨‹ç»Ÿä¸€ç”¨ <code>A</code>, å’Œä¸‹é¢çš„</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">\${{ secrets.THIS_IS_A_EXAMPLE }}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¹Ÿå¾—ä¸€è‡´!</p><p><s>è‹±è¯­å¥½çš„æœ‹å‹åˆ«å˜²è®½åœ¨ä¸‹ ğŸ˜µ</s></p><p>å†åœ¨ <code>actions</code> é‡Œç”¨</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">\${{ secrets.YOURKEY }}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å»å–ï¼Œé€šè¿‡ <code>env</code> å­˜å…¥æœåŠ¡å™¨çš„ç¯å¢ƒå˜é‡ã€‚å°±å¯ä»¥ç”¨å•¦ ğŸ‘»ã€‚</p><p>åšä¸ªå®éªŒã€‚<code>main.yaml</code> é‡ŒåŠ ä¸Šè¿™æ ·ä¸€æ®µã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code><span class="line"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Pass Variables</span>
<span class="line highlighted">  <span class="token key atrule">env</span><span class="token punctuation">:</span></span>
<span class="line highlighted">    <span class="token key atrule">EXAMPLE</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.THIS_IS_A_EXAMPLE <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line highlighted">    <span class="token key atrule">NOTEXIST</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.NOT_EXIST <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &#39;try to show secret ğŸ˜‰&#39; <span class="token important">&amp;&amp;</span> echo $EXAMPLE <span class="token important">&amp;&amp;</span> echo $NOT_EXIST</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºä¸‹å›¾è¿™æ ·çš„ç»“æœã€‚github æŠŠç»“æœåŠ å¯†äº†ï¼Œä¸è¿‡å¯ä»¥å‘ç°ï¼Œæœ‰è®¾ç½®çš„ <code>THIS_IS_A_EXAMPLE</code> å’Œæ²¡æœ‰è®¾ç½®çš„ <code>NOT_EXIST</code>ï¼Œ<code>echo</code> å‡ºæ¥æ˜¯ä¸ä¸€æ ·çš„ã€‚ç”±æ­¤å¯è§ï¼Œå·²ç»è®¾ç½®æˆåŠŸäº†ã€‚</p><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/470919/e72b8478-89cb-6f45-f406-e6938f81e1c7.png" alt="Screenshot 2020-03-23 13.11.39.png"></p><h3 id="å®æ–½" tabindex="-1"><a class="header-anchor" href="#å®æ–½"><span>å®æ–½</span></a></h3><p>ç›´æ¥è¯•è¯•å§ã€‚</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code><span class="line"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build</span>
<span class="line">  <span class="token key atrule">env</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">VSSUEID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VSSUEID <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token key atrule">VSSUESECRET</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VSSUESECRET <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install <span class="token important">&amp;&amp;</span> npm run build</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>npm run build</code> ä¹‹å‰åŠ ä¸Šç¯å¢ƒå‚æ•°é‚£ä¸€æ®µã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">  <span class="token literal-property property">vssueConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">platform</span><span class="token operator">:</span> <span class="token string">&#39;github&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">owner</span><span class="token operator">:</span> <span class="token string">&#39;xyyolab&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">repo</span><span class="token operator">:</span> <span class="token string">&#39;blog&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">clientId</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VSSUEID</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">clientSecret</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VSSUESECRET</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†åœ¨ <code>config</code> å†…ç”¨ node çš„è¯­æ³•å»ç¯å¢ƒå‚æ•°å–å°± OK å•¦ï¼</p><p>ç»“æœæ˜¯è¯„è®ºåŠŸèƒ½å¯ä»¥ä½¿ç”¨äº†å‘€ ğŸ˜ã€‚</p><p><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/470919/0a508150-59e8-948c-4601-b57012db2ed6.png" alt="Screenshot 2020-03-23 13.36.35.png"></p>`,21)),s("ul",null,[s("li",null,[n[9]||(n[9]=a("å®Œæ•´çš„ ")),n[10]||(n[10]=s("code",null,"main.yaml",-1)),n[11]||(n[11]=a(" è¯·å‚è€ƒæˆ‘çš„ ")),s("a",m,[n[8]||(n[8]=a("Github")),t(e)])])]),n[22]||(n[22]=s("p",null,"çœ‹èµ·æ¥ä¸€ä¸ªå°æ­¥éª¤ä½†è§£å†³äº†å¤§é—®é¢˜å‘¢ ğŸ’ƒã€‚",-1)),n[23]||(n[23]=s("hr",null,null,-1)),s("div",k,[n[17]||(n[17]=p('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">æç¤º</p>',2)),s("p",null,[n[14]||(n[14]=a("æœ¬æ–‡ä½œè€… ")),s("a",g,[n[12]||(n[12]=a("xyh ğŸ¸")),t(e)]),n[15]||(n[15]=a("ï¼Œåšå®¢ ")),s("a",b,[n[13]||(n[13]=a("xyh ğŸ¸")),t(e)]),n[16]||(n[16]=a("ã€‚"))])])])}const E=l(c,[["render",v]]),S=JSON.parse('{"path":"/blogs/github-actions-secret-key.html","title":"å¦‚ä½•åœ¨ GitHub Actions æ—¶ä½¿ç”¨ secretKey","lang":"zh-CN","frontmatter":{"title":"å¦‚ä½•åœ¨ GitHub Actions æ—¶ä½¿ç”¨ secretKey","date":"2020-03-20T00:00:00.000Z","author":"xyh ğŸ¸","tags":["Github Actions","Secret Key"],"categories":["blog"]},"headers":[{"level":2,"title":"å¦‚ä½•åœ¨ GitHub Actions æ—¶ä½¿ç”¨ secretKey","slug":"å¦‚ä½•åœ¨-github-actions-æ—¶ä½¿ç”¨-secretkey","link":"#å¦‚ä½•åœ¨-github-actions-æ—¶ä½¿ç”¨-secretkey","children":[{"level":3,"title":"é—®é¢˜","slug":"é—®é¢˜","link":"#é—®é¢˜","children":[]},{"level":3,"title":"è§£å†³æ–¹æ³•","slug":"è§£å†³æ–¹æ³•","link":"#è§£å†³æ–¹æ³•","children":[]},{"level":3,"title":"å®æ–½","slug":"å®æ–½","link":"#å®æ–½","children":[]}]}],"git":{"createdTime":1683217550000,"updatedTime":1683218544000,"contributors":[{"name":"reco_luan","username":"","email":"recoluan@qq.com","commits":2}]},"filePathRelative":"blogs/github-actions-secret-key.md"}');export{E as comp,S as data};
